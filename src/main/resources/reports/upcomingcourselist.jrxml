<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="upcomingcourselist" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="finyearend" class="java.lang.String"/>
	<parameter name="finyearstart" class="java.lang.String"/>
	<parameter name="financialyear" class="java.lang.String"/>
	<queryString>
		<![CDATA[--upcoming

select DISTINCT cc.coursecategorycode,cc.coursecategoryname,c.coursecode,c.coursename,c.coursedescription,
                   TO_CHAR(c.startdate,'dd/MM/yyyy') AS startdate,TO_CHAR(c.enddate,'dd/MM/yyyy') AS enddate,c.officecode,c.finalized,c.courseid,TO_CHAR(c.lastdate,'dd/MM/yyyy') AS lastdate,c.closed,f.officename,TO_CHAR(c.courseclosedate,'dd/MM/yyyy') AS courseclosedate,
                   array_to_string
                   (
                   ARRAY(
                   SELECT V.venuename FROM mt_venuecourses P
                              INNER JOIN m_venues V ON V.venuecode=P.venuecode
                   WHERE P.coursecode=c.coursecode
                   ), ','
                   ) AS venues,
                   array_to_string
                   (
                   ARRAY(
                   SELECT  U.username || ' (Mob: ' || U.usermobile || ')' FROM mt_coursecoordinators P
                              INNER JOIN mt_userlogin U ON U.usercode=P.usercode
                   WHERE P.coursecode=c.coursecode
                   ), E'\n'
                   ) AS coursecoordinators,
		   array_to_string
                   (
                   ARRAY(
                   SELECT  P.rpname || ', ' || P.rpdesignation || '(' || P.rpspecialization || ')' FROM mt_resourcepersons P
                              INNER JOIN mt_resourcepersoncoursemap U ON U.rpslno=P.rpslno
                   WHERE U.coursecode=c.coursecode
                   ), E'\n'
                   ) AS rp, c.enddate-c.startdate + 1 || ' days ' AS duration
                   FROM m_courses c
                   INNER JOIN m_coursecategories cc ON cc.coursecategorycode=c.coursecategorycode
                   INNER JOIN m_offices f ON c.officecode=f.officecode
WHERE ((TO_CHAR(c.startdate,'yyyy-MM')>=$P{finyearstart} AND TO_CHAR(c.startdate,'yyyy-MM')<=$P{finyearend}) OR ($P{finyearstart}='0')) AND c.finalized='Y' AND
TO_CHAR(c.startdate,'yyyy-MM-dd')>=TO_CHAR(now(),'yyyy-MM-dd') AND TO_CHAR(c.lastdate,'yyyy-MM-dd')>=TO_CHAR(now(),'yyyy-MM-dd')]]>
	</queryString>
	<field name="coursecategorycode" class="java.lang.Integer"/>
	<field name="coursecategoryname" class="java.lang.String"/>
	<field name="coursecode" class="java.lang.Integer"/>
	<field name="coursename" class="java.lang.String"/>
	<field name="coursedescription" class="java.lang.String"/>
	<field name="startdate" class="java.lang.String"/>
	<field name="enddate" class="java.lang.String"/>
	<field name="officecode" class="java.lang.Integer"/>
	<field name="finalized" class="java.lang.String"/>
	<field name="courseid" class="java.lang.String"/>
	<field name="lastdate" class="java.lang.String"/>
	<field name="closed" class="java.lang.String"/>
	<field name="officename" class="java.lang.String"/>
	<field name="courseclosedate" class="java.lang.String"/>
	<field name="venues" class="java.lang.String"/>
	<field name="coursecoordinators" class="java.lang.String"/>
	<field name="rp" class="java.lang.String"/>
	<field name="duration" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="118" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="47" width="802" height="37"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="16" isBold="true" isUnderline="true"/>
				</textElement>
				<text><![CDATA[List of Upcoming Programs]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="0" width="802" height="33"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="20" isBold="true"/>
				</textElement>
				<text><![CDATA[National Council Of Educational Research And Training]]></text>
			</staticText>
			<textField>
				<reportElement x="0" y="91" width="802" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{financialyear}.equals("0")?"":"Financial Year: "+$P{financialyear}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="35" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="49" splitType="Stretch">
			<staticText>
				<reportElement x="151" y="0" width="121" height="49"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Program Name]]></text>
			</staticText>
			<staticText>
				<reportElement x="561" y="0" width="77" height="49"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Program Coordinators]]></text>
			</staticText>
			<staticText>
				<reportElement x="725" y="0" width="77" height="49"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Last date]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="0" width="30" height="49"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Slno]]></text>
			</staticText>
			<staticText>
				<reportElement x="638" y="0" width="87" height="49"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Resource person]]></text>
			</staticText>
			<staticText>
				<reportElement x="489" y="0" width="72" height="49"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Venue]]></text>
			</staticText>
			<staticText>
				<reportElement x="272" y="0" width="125" height="49"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Program Description]]></text>
			</staticText>
			<staticText>
				<reportElement x="397" y="0" width="92" height="49"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Duration]]></text>
			</staticText>
			<staticText>
				<reportElement x="30" y="0" width="121" height="49"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5"/>
					<topPen lineWidth="0.5"/>
					<leftPen lineWidth="0.5"/>
					<bottomPen lineWidth="0.5"/>
					<rightPen lineWidth="0.5"/>
				</box>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Office]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<frame>
				<reportElement stretchType="RelativeToBandHeight" x="0" y="0" width="802" height="20"/>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToBandHeight" x="489" y="0" width="72" height="20"/>
					<box leftPadding="2" rightPadding="2">
						<pen lineWidth="0.5"/>
						<topPen lineWidth="0.5"/>
						<leftPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
						<rightPen lineWidth="0.5"/>
					</box>
					<textElement/>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{venues}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToBandHeight" x="561" y="0" width="77" height="20"/>
					<box leftPadding="2" rightPadding="2">
						<pen lineWidth="0.5"/>
						<topPen lineWidth="0.5"/>
						<leftPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
						<rightPen lineWidth="0.5"/>
					</box>
					<textElement/>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{coursecoordinators}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToBandHeight" x="638" y="0" width="87" height="20"/>
					<box leftPadding="2" rightPadding="2">
						<pen lineWidth="0.5"/>
						<topPen lineWidth="0.5"/>
						<leftPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
						<rightPen lineWidth="0.5"/>
					</box>
					<textElement/>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{rp}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true">
					<reportElement stretchType="RelativeToBandHeight" x="397" y="0" width="92" height="20"/>
					<box leftPadding="2" rightPadding="2">
						<pen lineWidth="0.5"/>
						<topPen lineWidth="0.5"/>
						<leftPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
						<rightPen lineWidth="0.5"/>
					</box>
					<textElement/>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{duration} +" ("+$F{startdate}+" to "+$F{enddate}+")"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true">
					<reportElement stretchType="RelativeToBandHeight" x="151" y="0" width="121" height="20"/>
					<box leftPadding="2" rightPadding="2">
						<pen lineWidth="0.5"/>
						<topPen lineWidth="0.5"/>
						<leftPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
						<rightPen lineWidth="0.5"/>
					</box>
					<textElement/>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{courseid}+": "+$F{coursename}+"["+$F{coursecategoryname}+"]"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToBandHeight" x="30" y="0" width="121" height="20"/>
					<box leftPadding="2" rightPadding="2">
						<pen lineWidth="0.5"/>
						<topPen lineWidth="0.5"/>
						<leftPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
						<rightPen lineWidth="0.5"/>
					</box>
					<textElement/>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{officename}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToBandHeight" x="272" y="0" width="125" height="20"/>
					<box leftPadding="2" rightPadding="2">
						<pen lineWidth="0.5"/>
						<topPen lineWidth="0.5"/>
						<leftPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
						<rightPen lineWidth="0.5"/>
					</box>
					<textElement/>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{coursedescription}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToBandHeight" x="0" y="0" width="30" height="20"/>
					<box leftPadding="2" rightPadding="2">
						<pen lineWidth="0.5"/>
						<topPen lineWidth="0.5"/>
						<leftPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
						<rightPen lineWidth="0.5"/>
					</box>
					<textElement/>
					<textFieldExpression class="java.lang.Integer"><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToBandHeight" x="725" y="0" width="77" height="20"/>
					<box leftPadding="2" rightPadding="2">
						<pen lineWidth="0.5"/>
						<topPen lineWidth="0.5"/>
						<leftPen lineWidth="0.5"/>
						<bottomPen lineWidth="0.5"/>
						<rightPen lineWidth="0.5"/>
					</box>
					<textElement/>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{lastdate}]]></textFieldExpression>
				</textField>
			</frame>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
