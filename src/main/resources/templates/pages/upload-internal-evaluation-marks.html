<!DOCTYPE html>
<html
        lang="en"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        xmlns:th="http://www.thymeleaf.org"
        layout:decorate="~{layouts/coordinator-faculty-layout}"
>
<head>
  <title>Internal Evaluation</title>
  <div layout:fragment="static-files">
  </div>

</head>
<body>

<div id="loader">
  <div class="spinner"></div>
</div>

<!-- Main Content Area -->
<main layout:fragment="content">
  <div class="container mt-4 mb-4">
    <div class="card box-shadow-grey">
      <div class="card-header bg-success">
        <h4 class="card-title fff text-center"><i class="fa fa-clipboard-list">  Internal Evaluation Form</i></h4>
      </div>
      <div class="col-12 mt-4">
        <div class="alert alert-info text-center py-3 px-4">
          <h5 class="mb-0">
            Internal evaluation marks is the <strong>final marks</strong>. Faculty must <strong>assess</strong> and <strong>calculate total marks</strong> for each subject/student before submission.
          </h5>
        </div>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-12 col-md-5 mb-3 mb-md-0">
            <label for="subjectcode">Select Subject</label>
            <select id="subjectcode" class="form-control">
              <option value="-1">Select Subject</option>
              <option th:if="${subs != null}" th:each="s : ${subs}" th:value="${s[0]}" th:text="${s[0]} + ' - ' + ${s[1]}"></option>
            </select>
          </div>

          <div class="col-12 col-md-5 mb-3 mb-md-0">
            <label for="testid">Select Test</label>
            <select id="testid" class="form-control">
              <option value="-1">Select Test</option>
              <option th:if="${tests != null}" th:each="t : ${tests}" th:value="${t[0]}" th:text="${t[3]} + ' - ' + ${t[8]}"></option>
            </select>
          </div>

          <div class="col-12 col-md-2 d-flex align-items-end">
            <button class="btn btn-success loadstudentsbtn w-100" data-function="loadStudents">
              LOAD STUDENTS
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="card mt-4 box-shadow-grey" >
      <div class="card-body">
        <h4 class="card-title titlecss" id="tabletitle"><i class="fa fa-list">  Internal Evaluation</i></h4>
        <hr/>
        <div class="table-responsive">
          <form id="marksform" name="studentinternalevaluationform" method="POST">
            <table class="table table-striped table-bordered center-sans-serif" id="internalevaluationtable" style="width:100%;">
              <thead class="fs-14">
              <tr>
                <th>Student ID</th>
                <th>Student Name</th>
                <th style="width: 150px;">Assign Marks</th>
              </tr>
              </thead>
              <tbody class="fs-12" id="studentslist">
              </tbody>
              <tfoot>
              <tr>
                <td colspan="3" class="text-right">
                  <input type="submit" class="btn btn-success" value="Save Student Marks"/>
                </td>
              </tr>
              </tfoot>
            </table>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- Feedback Modal -->
  <div class="modal fade" id="feedbackModal" tabindex="-1" role="dialog" aria-labelledby="feedbackModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header bg-light text-dark">
          <h5 class="modal-title" id="feedbackModalLabel">Message</h5>
          <button type="button" class="close text-dark" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body" id="feedbackModalBody">
          <!-- Message content inserted via JS -->
        </div>
        <div class="modal-footer">
          <button type="button" id="modalOkButton" class="btn btn-primary" data-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>
</main>

<th:block layout:fragment="scripts">
  <script th:src="@{/js/uploadInternalEvaluationMarks.js}"></script>
</th:block>
</body>
</html>